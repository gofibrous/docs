---
title: "Get Route (V2)"
description: "Find the optimal trading route with V2 API features"
api: "GET /{network}/v2/route"
---

## Overview

Route V2 endpoint provides the same routing functionality as V1, with additional features including integrator support, enhanced metadata, and improved response structure. Currently available on EVM networks.

<Note>
  V2 API is currently available on Evm networks. V1 endpoints remain available for backward compatibility.
</Note>

## Endpoint

<Tabs>
  <Tab title="EVM networks">
    ```bash
    https://api.fibrous.finance/{network}/v2/route
    ```
  </Tab>
</Tabs>

Find the optimal trading route through Fibrous' integrated liquidity sources to maximize output and minimize slippage. This endpoint analyzes multiple protocols, pool depths, and potential paths to deliver the most efficient swap execution for your tokens.

## What's New in V2

<CardGroup cols={2}>
  <Card title="Integrator Support" icon="users">
    Monetize your integration with fees or surplus sharing
  </Card>
  <Card title="Enhanced Metadata" icon="info">
    All responses include API version and timestamp
  </Card>
  <Card title="Better Tracking" icon="chart-line">
    Track output amounts before and after fees
  </Card>
  <Card title="API Key Support" icon="key">
    Use API keys for higher rate limits and integrator features
  </Card>
</CardGroup>

## Query Parameters

<ParamField query="amount" type="string" required>
  The amount of input tokens in wei format. For tokens with 18 decimals, multiply the amount by 10^18.

  Example: `"1000000000000000000"` for 1 token
</ParamField>

<ParamField query="tokenInAddress" type="string" required>
  The address of the input token.

  Example: `"0x0000000000000000000000000000000000000000"` for native token
</ParamField>

<ParamField query="tokenOutAddress" type="string" required>
  The address of the output token.

  Example: `"0x3bd359c1119da7da1d913d1c4d2b7c461115433a"` for wrapped token
</ParamField>

<ParamField query="reverse" type="boolean">
  Not supported yet - reserved for future use. Default: `false`
</ParamField>

<ParamField query="direct" type="boolean">
  If true, only direct swaps between the input and output tokens will be considered. Default: `false`
</ParamField>

<ParamField query="excludeProtocols" type="string">
  Comma-separated list of protocol IDs to exclude from routing (e.g., "1,2,3"). Default: `""`
</ParamField>

<ParamField query="integratorAddress" type="string">
  Integrator wallet address to receive fees or surplus. Requires API key authentication.
</ParamField>

<ParamField query="integratorFeePercentageBps" type="number">
  Integrator fee percentage in basis points (0-500, maximum 5%). Cannot be used together with integratorSurplusPercentageBps.
</ParamField>

<ParamField query="integratorSurplusPercentageBps" type="number">
  Integrator surplus percentage in basis points (0-5000, maximum 50%). Cannot be used together with integratorFeePercentageBps.
</ParamField>

<Warning>
  **API Key Required**: Integrator features (integratorAddress, integratorFeePercentageBps, integratorSurplusPercentageBps) require an API key. Partners must obtain an API key from Fibrous to use these monetization features. Include the API key in the request headers as `X-API-Key`.
</Warning>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the request was successful.
</ResponseField>

<ResponseField name="routeSwapType" type="number">
  Type of swap route (0: ETH to Token, 1: Token to ETH, 2: Token to Token).
</ResponseField>

<ResponseField name="inputToken" type="object">
  Details about the input token.

  <Expandable>
    <ResponseField name="name" type="string">
      The token's name
    </ResponseField>
    <ResponseField name="address" type="string">
      The token's contract address
    </ResponseField>
    <ResponseField name="decimals" type="number">
      Number of decimals the token uses
    </ResponseField>
    <ResponseField name="price" type="number">
      Current price of the token in USD
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="inputAmount" type="string">
  The input amount in wei format.
</ResponseField>

<ResponseField name="outputToken" type="object">
  Details about the output token (same structure as inputToken).
</ResponseField>

<ResponseField name="outputAmount" type="string">
  The estimated amount of output tokens in wei format.
</ResponseField>

<ResponseField name="outputAmountAfterFee" type="string">
  The output amount after integrator fee deduction (if integrator fee is used).
</ResponseField>

<ResponseField name="estimatedGasUsed" type="string">
  Estimated gas cost for the swap in wei.
</ResponseField>

<ResponseField name="estimatedGasUsedInUsd" type="number">
  Estimated gas cost in USD.
</ResponseField>

<ResponseField name="route" type="array">
  Array of route segments with detailed swap information.

  <Expandable>
    <ResponseField name="percent" type="string">
      Percentage of input amount going through this route
    </ResponseField>
    <ResponseField name="swaps" type="array">
      Array of swap steps in this route segment

      <Expandable>
        <ResponseField name="protocol" type="number">
          Protocol identifier
        </ResponseField>
        <ResponseField name="poolName" type="string">
          Name of the liquidity pool
        </ResponseField>
        <ResponseField name="poolAddress" type="string">
          Address of the liquidity pool
        </ResponseField>
        <ResponseField name="percent" type="string">
          Percentage of the segment amount through this pool
        </ResponseField>
        <ResponseField name="extraData" type="object">
          Protocol-specific parameters
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="integratorAddress" type="string">
  Integrator address (if provided).
</ResponseField>

<ResponseField name="integratorFeePercentageBps" type="number">
  Integrator fee percentage in basis points (if applicable).
</ResponseField>

<ResponseField name="integratorSurplusPercentageBps" type="number">
  Integrator surplus percentage in basis points (if applicable).
</ResponseField>

<ResponseField name="integratorName" type="string">
  Integrator name from API key (if applicable).
</ResponseField>

<ResponseField name="meta" type="object" required>
  API metadata including version and timestamp.

  <Expandable>
    <ResponseField name="apiVersion" type="string">
      API version (e.g., "2.0")
    </ResponseField>
    <ResponseField name="timestamp" type="string">
      Response timestamp in ISO 8601 format
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>
```bash cURL
curl -L \
  "https://api.fibrous.finance/{network}/v2/route?amount=1000000000000000000&tokenInAddress=0x0000000000000000000000000000000000000000&tokenOutAddress=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913" \
  --header "Accept: */*"
```

```javascript JavaScript
const axios = require('axios');

const params = {
  amount: '1000000000000000000',
  tokenInAddress: '0x0000000000000000000000000000000000000000',
  tokenOutAddress: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913'
};

// Optional: Add API key for integrator features
const headers = {
  'X-API-Key': 'your-api-key-here'
};

axios.get('https://api.fibrous.finance/{network}/v2/route', { params, headers })
  .then(response => {
    console.log(`API Version: ${response.data.meta.apiVersion}`);
    console.log(response.data);
  })
  .catch(error => console.error(error));
```

```python Python
import requests

url = "https://api.fibrous.finance/{network}/v2/route"

params = {
    "amount": "1000000000000000000",
    "tokenInAddress": "0x0000000000000000000000000000000000000000",
    "tokenOutAddress": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"
}

# Optional: Add API key for integrator features
headers = {
    "X-API-Key": "your-api-key-here"  # optional
}

response = requests.get(url, params=params, headers=headers)
data = response.json()
print(f"API Version: {data['meta']['apiVersion']}")
print(data)
```

```java Java
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;

public class FibrousRoute {
    public static void main(String[] args) throws Exception {
        String baseUrl = "https://api.fibrous.finance/{network}/v2/route";
        String params = "amount=1000000000000000000" +
                       "&tokenInAddress=0x0000000000000000000000000000000000000000" +
                       "&tokenOutAddress=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913";
        
        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(baseUrl + "?" + params))
            .header("Accept", "*/*")
            // Optional: Add API key for integrator features
            .header("X-API-Key", "your-api-key-here")
            .GET()
            .build();
        
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        System.out.println("Response: " + response.body());
    }
}
```

```go Go
package main

import (
    "fmt"
    "io"
    "net/http"
    "net/url"
)

func main() {
    baseURL := "https://api.fibrous.finance/{network}/v2/route"
    
    params := url.Values{}
    params.Add("amount", "1000000000000000000")
    params.Add("tokenInAddress", "0x0000000000000000000000000000000000000000")
    params.Add("tokenOutAddress", "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913")
    
    req, err := http.NewRequest("GET", baseURL+"?"+params.Encode(), nil)
    if err != nil {
        panic(err)
    }
    
    req.Header.Set("Accept", "*/*")
    // Optional: Add API key for integrator features
    req.Header.Set("X-API-Key", "your-api-key-here")
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    body, err := io.ReadAll(resp.Body)
    if err != nil {
        panic(err)
    }
    
    fmt.Println("Response:", string(body))
}
```
</RequestExample>

<ResponseExample>

```json
{
  "success": true,
  "routeSwapType": 0,
  "inputToken": {
    "name": "Wrapped Ether",
    "address": "0x4200000000000000000000000000000000000006",
    "decimals": 18,
    "price": 2949.717076112869
  },
  "inputAmount": "1000000000000000000",
  "outputToken": {
    "name": "USD Coin",
    "address": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
    "decimals": 6,
    "price": 0.999597487941284
  },
  "outputAmount": "2951108576",
  "time": 3.285,
  "estimatedGasUsed": "0",
  "estimatedGasUsedInUsd": 0,
  "route": [
    {
      "percent": "35%",
      "swaps": [
        [
          {
            "protocol": 3,
            "poolName": "Aerodrome Slipstream",
            "poolAddress": "0xb2cc224c1c9fee385f8ad6a55b4d94e92359dc59",
            "fromTokenAddress": "0x4200000000000000000000000000000000000006",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "48.57%",
            "extraData": {
              "tickSpacing": 100
            }
          },
          {
            "protocol": 9,
            "poolName": "PancakeSwap V3",
            "poolAddress": "0x72ab388e2e2f6facef59e3c3fa2c4e29011c2d38",
            "fromTokenAddress": "0x4200000000000000000000000000000000000006",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "51.43%",
            "extraData": {
              "fee": 100
            }
          }
        ]
      ]
    },
    {
      "percent": "65%",
      "swaps": [
        [
          {
            "protocol": 3,
            "poolName": "Aerodrome Slipstream",
            "poolAddress": "0x70acdf2ad0bf2402c957154f944c19ef4e1cbae1",
            "fromTokenAddress": "0x4200000000000000000000000000000000000006",
            "toTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "percent": "53.00%",
            "extraData": {
              "tickSpacing": 100
            }
          },
          {
            "protocol": 9,
            "poolName": "PancakeSwap V3",
            "poolAddress": "0xc211e1f853a898bd1302385ccde55f33a8c4b3f3",
            "fromTokenAddress": "0x4200000000000000000000000000000000000006",
            "toTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "percent": "47.00%",
            "extraData": {
              "fee": 100
            }
          }
        ],
        [
          {
            "protocol": 9,
            "poolName": "PancakeSwap V3",
            "poolAddress": "0xb94b22332abf5f89877a14cc88f2abc48c34b3df",
            "fromTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "75.00%",
            "extraData": {
              "fee": 100
            }
          },
          {
            "protocol": 52,
            "poolName": "Hydrex",
            "poolAddress": "0x0ba69825c4c033e72309f6ac0bde0023b15cc97c",
            "fromTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "6.00%",
            "extraData": null
          },
          {
            "protocol": 57,
            "poolName": "Quickswap Algebra",
            "poolAddress": "0xacc2874ed22e811afdc47979c7b7985cced53b29",
            "fromTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "18.00%",
            "extraData": null
          },
          {
            "protocol": 55,
            "poolName": "PancakeSwap Infinity",
            "poolAddress": "0xa0FfB9c1CE1Fe56963B0321B32E7A0302114058b",
            "fromTokenAddress": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "1.00%",
            "extraData": {
              "poolId": "0x2a597b8f49af109cebd39704508265dc0083b4bf95ff4b184fb082ae7d71192e",
              "token0": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
              "token1": "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf",
              "fee": 61,
              "tickSpacing": 1,
              "hooks": "0x0000000000000000000000000000000000000000"
            }
          }
        ]
      ]
    }
  ],
  "bestQuotesByProtocols": [],
  "initial": false,
  "meta": {
    "apiVersion": "2.0",
    "timestamp": "2026-01-24T21:46:39.518Z"
  }
}
```
</ResponseExample>

## Integrator Features

<Warning>
  **API Key Required**: To use integrator features, partners must obtain an API key from Fibrous. Contact us at [contact@fibrous.finance](mailto:contact@fibrous.finance) or join our [Discord](https://discord.gg/fibrous) to request an API key.
</Warning>

To use integrator features, include your API key in the request headers:

```javascript
const headers = {
  'X-API-Key': 'your-api-key-here'
};

const params = {
  amount: '1000000000000000000',
  tokenInAddress: '0x0000000000000000000000000000000000000000',
  tokenOutAddress: '0x3bd359c1119da7da1d913d1c4d2b7c461115433a',
  integratorAddress: '0xYourWalletAddress',
  integratorFeePercentageBps: 100 // 1% fee
};

const response = await fetch('https://api.fibrous.finance/{network}/v2/route?' + new URLSearchParams(params), {
  headers
});
```

<Warning>
  You cannot use both `integratorFeePercentageBps` and `integratorSurplusPercentageBps` in the same request. Choose one monetization method.
</Warning>

## Differences from V1

| Feature              | V1 | V2                 |
| -------------------- | --- | ------------------ |
| Meta field           | ❌  | ✅ Always present   |
| Integrator support   | ❌  | ✅ With API key     |
| outputAmountAfterFee | ❌  | ✅ When fee is used |
| API version tracking | ❌  | ✅ In meta field    |

## Best Practices

1. **Always check meta.apiVersion** to ensure you're using the expected API version
2. **Use API keys** for production integrations to access integrator features
3. **Monitor meta.timestamp** for debugging and tracking response times
4. **Handle outputAmountAfterFee** when using integrator fees to show accurate amounts to users

## Related Endpoints

- [Route V1](/api-reference/endpoints/route) - Original route endpoint
- [Route and Calldata V2](/api-reference/endpoints/routeAndCallData-v2) - Get route and calldata in one call
- [Calldata V2](/api-reference/endpoints/calldata-v2) - Generate calldata from route
- [V2 Migration Guide](/api-reference/v2-migration) - Complete migration guide