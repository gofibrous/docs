---
title: "Get Calldata"
description: "Get route and transaction calldata in a single request"
api: "POST /{network}/calldata"
---

## Overview

<Info>
  **V2 Available**: This endpoint maps to `/{network}/v2/routeAndCallData` in V2, with integrator support and metadata. See [Route and Calldata V2](/api-reference/endpoints/routeAndCallData-v2) and the [V2 Migration Guide](/api-reference/v2-migration).
</Info>

The Calldata endpoint combines the functionality of both `/route` and `/execute` endpoints, providing an optimized way to get transaction calldata in a single API call. This is ideal for applications that want to minimize API calls and latency.

## Supported Networks

<Tabs>
  <Tab title="Base">
    ```bash
    https://api.fibrous.finance/{network}/calldata
    ```
  </Tab>
  <Tab title="HyperEVM">
    ```bash
    https://api.fibrous.finance/hyperevm/calldata
    ```
  </Tab>
  <Tab title="Citrea">
    ```bash
    https://api.fibrous.finance/citrea/calldata
    ```
  </Tab>
  <Tab title="Monad">
    ```bash
    https://api.fibrous.finance/monad/calldata
    ```
  </Tab>
  <Tab title="Starknet">
    ```bash
    https://api.fibrous.finance/starknet/calldata
    ```
  </Tab>
</Tabs>

## Request Body Parameters

<ParamField body="amount" type="string" required>
  The amount of input tokens in wei format.
  
  Example: `"1000000000000000000"` for 1 token with 18 decimals
</ParamField>

<ParamField body="tokenInAddress" type="string" required>
  The contract address of the input token.
</ParamField>

<ParamField body="tokenOutAddress" type="string" required>
  The contract address of the output token.
</ParamField>

<ParamField body="slippage" type="number" default="0.5" required>
  Maximum acceptable slippage in percentage (0.1 to 100).
</ParamField>

<ParamField body="destination" type="string" required>
  The destination address to receive the output tokens.
</ParamField>

<ParamField body="excludeProtocols" type="string[]">
  Array of protocol IDs to exclude from routing.
</ParamField>

<ParamField body="direct" type="boolean" default="false">
  If true, only direct swaps will be considered.
</ParamField>

## Response

This endpoint combines the route and execute responses:

<ResponseField name="success" type="boolean">
  Indicates if the route was successfully found
</ResponseField>

<ResponseField name="route" type="object">
  Complete route information (same as /route endpoint)
  <Expandable>
    <ResponseField name="inputToken" type="object">
      Input token details (name, address, decimals, price)
    </ResponseField>
    <ResponseField name="outputToken" type="object">
      Output token details (name, address, decimals, price)
    </ResponseField>
    <ResponseField name="inputAmount" type="string">
      Input amount in wei
    </ResponseField>
    <ResponseField name="outputAmount" type="string">
      Expected output amount in wei
    </ResponseField>
    <ResponseField name="time" type="number">
      Route calculation time in seconds
    </ResponseField>
    <ResponseField name="route" type="array">
      Array of route segments with swap details
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="swap_parameters" type="object[]">
  Swap parameters for execution
  <Expandable>
    <ResponseField name="token_in" type="string">
      Input token address
    </ResponseField>
    <ResponseField name="token_out" type="string">
      Output token address
    </ResponseField>
    <ResponseField name="rate" type="string">
      Exchange rate
    </ResponseField>
    <ResponseField name="protocol_id" type="string">
      Protocol identifier
    </ResponseField>
    <ResponseField name="pool_address" type="string">
      Pool address
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="calldata" type="string">
  The encoded transaction calldata ready for execution
</ResponseField>

<ResponseField name="to" type="string">
  Fibrous Router contract address
</ResponseField>

<ResponseField name="value" type="string">
  The amount of native token to send with the transaction
</ResponseField>

<RequestExample>

```bash cURL
curl -X POST "https://api.fibrous.finance/{network}/calldata" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": "1000000000000000000",
    "tokenInAddress": "0x0000000000000000000000000000000000000000",
    "tokenOutAddress": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",
    "slippage": 0.5,
    "destination": "0x1234567890123456789012345678901234567890"
  }'
```
```javascript JavaScript
const response = await fetch('https://api.fibrous.finance/{network}/calldata', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    amount: '1000000000000000000',
    tokenInAddress: '0x0000000000000000000000000000000000000000',
    tokenOutAddress: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913',
    slippage: 0.5,
    destination: '0x1234567890123456789012345678901234567890'
  })
});

const data = await response.json();

// Execute the transaction
const tx = await wallet.sendTransaction({
  to: data.to,
  data: data.calldata,
  value: data.value
});
```
```python Python
import requests

url = "https://api.fibrous.finance/{network}/calldata"

payload = {
    "amount": "1000000000000000000",
    "tokenInAddress": "0x0000000000000000000000000000000000000000",
    "tokenOutAddress": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",
    "slippage": 0.5,
    "destination": "0x1234567890123456789012345678901234567890"
}

response = requests.post(url, json=payload)
data = response.json()

# Use the calldata to execute transaction
print(f"Send transaction to: {data['to']}")
print(f"Calldata: {data['calldata']}")
print(f"Value: {data['value']}")
```
```java Java
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.util.HashMap;
import java.util.Map;

public class FibrousCalldata {
    public static void main(String[] args) throws Exception {
        String url = "https://api.fibrous.finance/{network}/calldata";
        
        Map<String, Object> payload = new HashMap<>();
        payload.put("amount", "1000000000000000000");
        payload.put("tokenInAddress", "0x0000000000000000000000000000000000000000");
        payload.put("tokenOutAddress", "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913");
        payload.put("slippage", 0.5);
        payload.put("destination", "0x1234567890123456789012345678901234567890");
        
        ObjectMapper mapper = new ObjectMapper();
        String jsonBody = mapper.writeValueAsString(payload);
        
        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
            .build();
        
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        System.out.println("Response: " + response.body());
    }
}
```
```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io"
    "net/http"
)

type Payload struct {
    Amount          string  `json:"amount"`
    TokenInAddress  string  `json:"tokenInAddress"`
    TokenOutAddress string  `json:"tokenOutAddress"`
    Slippage        float64 `json:"slippage"`
    Destination     string  `json:"destination"`
}

func main() {
    url := "https://api.fibrous.finance/{network}/calldata"
    
    payload := Payload{
        Amount:          "1000000000000000000",
        TokenInAddress:  "0x0000000000000000000000000000000000000000",
        TokenOutAddress: "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",
        Slippage:        0.5,
        Destination:     "0x1234567890123456789012345678901234567890",
    }
    
    jsonData, err := json.Marshal(payload)
    if err != nil {
        panic(err)
    }
    
    req, err := http.NewRequest("POST", url, bytes.NewBuffer(jsonData))
    if err != nil {
        panic(err)
    }
    
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    body, err := io.ReadAll(resp.Body)
    if err != nil {
        panic(err)
    }
    
    fmt.Println("Response:", string(body))
}
```
</RequestExample>

<ResponseExample>

```json
{
  "success": true,
  "route": {
    "inputToken": {
      "name": "Wrapped Ether",
      "address": "0x4200000000000000000000000000000000000006",
      "decimals": 18,
      "price": 3171.37
    },
    "outputToken": {
      "name": "USD Coin",
      "address": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
      "decimals": 6,
      "price": 0.99971
    },
    "inputAmount": "1000000000000000000",
    "outputAmount": "3165007379",
    "time": 0.495,
    "route": [
      {
        "percent": "51%",
        "swaps": [[...]]
      }
    ]
  },
  "swap_parameters": [
    {
      "token_in": "0x4200000000000000000000000000000000000006",
      "token_out": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
      "rate": "3165007379",
      "protocol_id": "9",
      "pool_address": "0x72ab388e2e2f6facef59e3c3fa2c4e29011c2d38"
    }
  ],
  "calldata": "0x...",
  "to": "0x274602a953847d807231d2370072f5f4e4594b44",
  "value": "1000000000000000000"
}
```
</ResponseExample>

## When to Use This Endpoint

<CardGroup cols={2}>
  <Card title="Use Calldata" icon="bolt">
    - Single-step swap execution
    - Minimizing API calls
    - Reducing latency
    - Simple integrations
  </Card>
  
  <Card title="Use Route + Execute" icon="route">
    - Need to display route preview
    - User confirmation required
    - Complex routing logic
    - Custom route manipulation
  </Card>
</CardGroup>

## Best Practices

1. **Token Approvals**
   - Check token allowance before calling
   - Approve Fibrous Router to spend tokens
   - Not needed for native token swaps

2. **Transaction Execution**
   - Use the exact `to`, `calldata`, and `value` from response
   - Set appropriate gas limit (use `estimatedGas` + buffer)
   - Monitor transaction status after submission

3. **Error Handling**
   - Implement retry logic for failed requests
   - Handle insufficient liquidity gracefully
   - Validate addresses before calling

## Complete Integration Example

```javascript
import { ethers } from 'ethers';

async function executeSwap(provider, signer) {
  // 1. Get calldata
  const response = await fetch('https://api.fibrous.finance/{network}/calldata', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      amount: '1000000000000000000',
      tokenInAddress: '0x0000000000000000000000000000000000000000',
      tokenOutAddress: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913',
      slippage: 0.5,
      destination: await signer.getAddress()
    })
  });
  
  const data = await response.json();
  
  // 2. Execute transaction
  const tx = await signer.sendTransaction({
    to: data.to,
    data: data.calldata,
    value: data.value,
    gasLimit: Math.floor(Number(data.estimatedGas) * 1.2) // 20% buffer
  });
  
  // 3. Wait for confirmation
  const receipt = await tx.wait();
  console.log('Swap completed:', receipt.transactionHash);
  
  return receipt;
}
```

## Network-Specific Router Addresses

<Tabs>
  <Tab title="Base">
    ```
    Router: 0x... (included in response)
    ```
  </Tab>
  <Tab title="HyperEVM">
    ```
    Router: 0x... (included in response)
    ```
  </Tab>
  <Tab title="Citrea">
    ```
    Router: 0x... (included in response)
    ```
  </Tab>
  <Tab title="Starknet">
    ```
    Router: 0x... (Cairo format, included in response)
    ```
  </Tab>
</Tabs>

<Note>
  Router addresses are always included in the API response. No need to hardcode them in your application.
</Note>

## Related Endpoints

- [Get Route](/api-reference/endpoints/route) - Get route without execution data
- [Execute Swap](/api-reference/endpoints/execute) - Execute with existing route
- [Health Check](/api-reference/endpoints/health-check) - Check API status
- [Route and Calldata V2](/api-reference/endpoints/routeAndCallData-v2) - V2 equivalent of this endpoint
- [V2 Migration Guide](/api-reference/v2-migration) - Migrate to V2 API


