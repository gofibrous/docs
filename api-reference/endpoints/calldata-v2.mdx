---
title: "Calldata (V2)"
description: "Generate calldata for executing a swap using a pre-calculated route"
api: "POST /{network}/v2/calldata"
---

## Overview

The Calldata V2 endpoint generates transaction calldata for executing a swap using a pre-calculated route. This endpoint is useful when you already have a route from the `/v2/route` endpoint and want to generate the execution calldata with specific slippage and destination parameters. Currently available on EVM networks.

<Note>
  V2 API is currently available on EVM networks. V1 endpoints remain available for backward compatibility.
</Note>

## Endpoint

<Tabs>
  <Tab title="EVM Networks">
    ```bash
    https://api.fibrous.finance/{network}/v2/calldata
    ```
  </Tab>
</Tabs>

Generate transaction calldata for executing a swap using a pre-calculated route. This endpoint is useful when you already have a route and want to generate calldata with different slippage or destination parameters.

## Request Body Parameters

<ParamField body="route" type="object" required>
  The complete route response object from the `/v2/route` endpoint. This contains all the necessary information about the optimal route.
</ParamField>

<ParamField body="slippage" type="number" required>
  Maximum acceptable slippage percentage (0-49, e.g., 0.5 for 0.5%).
</ParamField>

<ParamField body="destination" type="string" required>
  Recipient address for the output tokens.
</ParamField>

<Warning>
  **API Key Required**: Integrator features (integratorAddress, integratorFeePercentageBps or integratorSurplusPercentageBps) require an API key. Partners must obtain an API key from Fibrous to use these monetization features. Include the API key in the request headers as `X-API-Key`.
</Warning>

## Response

<ResponseField name="route" type="object">
  Route information for the calldata.

  <Expandable>
    <ResponseField name="token_in" type="string">
      Input token address
    </ResponseField>
    <ResponseField name="token_out" type="string">
      Output token address
    </ResponseField>
    <ResponseField name="amount_in" type="string">
      Input amount in wei
    </ResponseField>
    <ResponseField name="amount_out" type="string">
      Output amount in wei
    </ResponseField>
    <ResponseField name="min_received" type="string">
      Minimum amount to receive (considering slippage)
    </ResponseField>
    <ResponseField name="destination" type="string">
      Recipient address
    </ResponseField>
    <ResponseField name="swap_type" type="number">
      Type of swap
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="swap_parameters" type="array">
  Array of swap parameters for each hop in the route.

  <Expandable>
    <ResponseField name="token_in" type="string">
      Input token address for this swap
    </ResponseField>
    <ResponseField name="token_out" type="string">
      Output token address for this swap
    </ResponseField>
    <ResponseField name="rate" type="string">
      Rate of the swap
    </ResponseField>
    <ResponseField name="protocol_id" type="string">
      Protocol identifier
    </ResponseField>
    <ResponseField name="pool_address" type="string">
      Pool address for this swap
    </ResponseField>
    <ResponseField name="swap_type" type="number">
      Type of swap
    </ResponseField>
    <ResponseField name="extra_data" type="string">
      Protocol-specific extra data (hex encoded)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="router_address" type="string">
  Router contract address for executing the swap.
</ResponseField>

<ResponseField name="meta" type="object" required>
  API metadata including version and timestamp.

  <Expandable>
    <ResponseField name="apiVersion" type="string">
      API version (e.g., "2.0")
    </ResponseField>
    <ResponseField name="timestamp" type="string">
      Response timestamp in ISO 8601 format
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>

```bash cURL
curl -X POST "https://api.fibrous.finance/{network}/v2/calldata" \
  -H "Content-Type: application/json" \
  -d '{
    "route": {
      "success": true,
      "routeSwapType": 0,
      "inputToken": {
        "name": "Wrapped Ether",
        "address": "0x4200000000000000000000000000000000000006",
        "decimals": 18,
        "price": 2949.717076112869
      },
      "inputAmount": "1000000000000000000",
      "outputToken": {
        "name": "USD Coin",
        "address": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
        "decimals": 6,
        "price": 0.999597487941284
      },
      "outputAmount": "2951108576",
      "route": []
    },
    "slippage": 0.5,
    "destination": "0x1234567890123456789012345678901234567890"
  }'
```


```javascript JavaScript
const axios = require('axios');

const route = {
  success: true,
  routeSwapType: 0,
  inputToken: {
    name: "Wrapped Ether",
    address: "0x4200000000000000000000000000000000000006",
    decimals: 18,
    price: 2949.717076112869
  },
  inputAmount: "1000000000000000000",
  outputToken: {
    name: "USD Coin",
    address: "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
    decimals: 6,
    price: 0.999597487941284
  },
  outputAmount: "2951108576",
  route: []
};

const data = {
  route,
  slippage: 0.5,
  destination: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
};

axios.post('https://api.fibrous.finance/{network}/v2/calldata', data, {
  headers: {
    'Content-Type': 'application/json'
  }
})
  .then(response => {
    console.log(`API Version: ${response.data.meta.apiVersion}`);
    console.log(`Router: ${response.data.router_address}`);
    // Use response.data for transaction execution
  })
  .catch(error => console.error(error));
```


```python Python
import requests
import json

url = "https://api.fibrous.finance/{network}/v2/calldata"

route = {
    "success": True,
    "routeSwapType": 0,
    "inputToken": {
        "name": "Wrapped Ether",
        "address": "0x4200000000000000000000000000000000000006",
        "decimals": 18,
        "price": 2949.717076112869
    },
    "inputAmount": "1000000000000000000",
    "outputToken": {
        "name": "USD Coin",
        "address": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
        "decimals": 6,
        "price": 0.999597487941284
    },
    "outputAmount": "2951108576",
    "route": []
}

payload = {
    "route": route,
    "slippage": 0.5,
    "destination": "0x1234567890123456789012345678901234567890"
}

response = requests.post(url, json=payload)
data = response.json()

print(f"API Version: {data['meta']['apiVersion']}")
print(f"Router Address: {data['router_address']}")
```

```java Java
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.util.HashMap;
import java.util.Map;

public class FibrousCalldata {
    public static void main(String[] args) throws Exception {
        String url = "https://api.fibrous.finance/{network}/v2/calldata";
        
        Map<String, Object> route = new HashMap<>();
        route.put("success", true);
        route.put("routeSwapType", 0);
        
        Map<String, Object> inputToken = new HashMap<>();
        inputToken.put("name", "Wrapped Ether");
        inputToken.put("address", "0x4200000000000000000000000000000000000006");
        inputToken.put("decimals", 18);
        inputToken.put("price", 2949.717076112869);
        route.put("inputToken", inputToken);
        route.put("inputAmount", "1000000000000000000");
        
        Map<String, Object> outputToken = new HashMap<>();
        outputToken.put("name", "USD Coin");
        outputToken.put("address", "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913");
        outputToken.put("decimals", 6);
        outputToken.put("price", 0.999597487941284);
        route.put("outputToken", outputToken);
        route.put("outputAmount", "2951108576");
        route.put("route", new Object[0]);
        
        Map<String, Object> payload = new HashMap<>();
        payload.put("route", route);
        payload.put("slippage", 0.5);
        payload.put("destination", "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb");
        
        ObjectMapper mapper = new ObjectMapper();
        String jsonBody = mapper.writeValueAsString(payload);
        
        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
            .build();
        
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        System.out.println("Response: " + response.body());
    }
}
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io"
    "net/http"
)

type Route struct {
    Success      bool                   `json:"success"`
    RouteSwapType int                   `json:"routeSwapType"`
    InputToken   map[string]interface{} `json:"inputToken"`
    InputAmount  string                 `json:"inputAmount"`
    OutputToken  map[string]interface{} `json:"outputToken"`
    OutputAmount string                 `json:"outputAmount"`
    Route        []interface{}          `json:"route"`
}

type Payload struct {
    Route       Route   `json:"route"`
    Slippage    float64 `json:"slippage"`
    Destination string  `json:"destination"`
}

func main() {
    url := "https://api.fibrous.finance/{network}/v2/calldata"
    
    route := Route{
        Success:      true,
        RouteSwapType: 0,
        InputToken: map[string]interface{}{
            "name":     "Wrapped Ether",
            "address":  "0x4200000000000000000000000000000000000006",
            "decimals": 18,
            "price":    2949.717076112869,
        },
        InputAmount: "1000000000000000000",
        OutputToken: map[string]interface{}{
            "name":     "USD Coin",
            "address":  "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "decimals": 6,
            "price":    0.999597487941284,
        },
        OutputAmount: "2951108576",
        Route:        []interface{}{},
    }
    
    payload := Payload{
        Route:       route,
        Slippage:    0.5,
        Destination: "0x1234567890123456789012345678901234567890",
    }
    
    jsonData, err := json.Marshal(payload)
    if err != nil {
        panic(err)
    }
    
    req, err := http.NewRequest("POST", url, bytes.NewBuffer(jsonData))
    if err != nil {
        panic(err)
    }
    
    req.Header.Set("Content-Type", "application/json")
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()
    
    body, err := io.ReadAll(resp.Body)
    if err != nil {
        panic(err)
    }
    
    fmt.Println("Response:", string(body))
}
```
</RequestExample>

<ResponseExample>

```json
{
  "route": {
    "token_in": "0x4200000000000000000000000000000000000006",
    "token_out": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
    "amount_in": "1000000000000000000",
    "amount_out": "2951108576",
    "min_received": "2936407033",
    "destination": "0x1234567890123456789012345678901234567890",
    "swap_type": 0
  },
  "swap_parameters": [
    {
      "token_in": "0x4200000000000000000000000000000000000006",
      "token_out": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
      "rate": "2951108576",
      "protocol_id": "3",
      "pool_address": "0xb2cc224c1c9fee385f8ad6a55b4d94e92359dc59",
      "swap_type": 0,
      "extra_data": "0x0064"
    }
  ],
  "router_address": "0x274602a953847d807231d2370072f5f4e4594b44",
  "meta": {
    "apiVersion": "2.0",
    "timestamp": "2026-01-24T21:46:40.000Z"
  }
}
```

## Differences from V1

| Feature            | V1           | V2               |
| ------------------ | ------------ | ---------------- |
| HTTP Method        | GET          | POST             |
| Meta field         | ❌            | ✅ Always present |
| Integrator support | ❌            | ✅ With API key   |
| Request format     | Query params | Request body     |

## Best Practices

1. **Use fresh routes** - Routes can become stale within 30-60 seconds
2. **Verify min_received** - Always check that the minimum received amount matches your expectations
3. **Check destination** - Ensure the destination address is correct
4. **Monitor meta.timestamp** - Track when the calldata was generated

## Error Responses

### Invalid Route

```json
{
  "success": false,
  "error": "Invalid route",
  "details": "The provided route is invalid or expired"
}
```

### Invalid Slippage

```json
{
  "success": false,
  "error": "Invalid slippage",
  "details": "Slippage must be between 0 and 49"
}
```
</ResponseExample>

## Related Endpoints

- [Route V2](/api-reference/endpoints/route-v2) - Get optimal swap routes
- [Route and Calldata V2](/api-reference/endpoints/routeAndCallData-v2) - Get route and calldata in one call
- [V2 Migration Guide](/api-reference/v2-migration) - Complete migration guide