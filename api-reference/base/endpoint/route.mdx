---
title: 'Route'
description: 'Find the optimal trading route through Fibrous liquidity pools'
api: 'GET /base/route'
---

## Endpoint

<CodeGroup>
```bash
https://api.fibrous.finance/base/route
```
</CodeGroup>

Find the optimal trading route through Fibrous's liquidity pools to maximize output and minimize slippage. This endpoint analyzes multiple protocols, pool depths, and potential paths to deliver the most efficient swap execution for your tokens.

## Query Parameters

<ParamField query="amount" type="string" required>
  The amount of input tokens in wei format. For tokens with 18 decimals, multiply the amount by 10^18.
  
  Example: `"1000000000000000000"` for 1 ETH
</ParamField>

<ParamField query="tokenInAddress" type="string" required>
  The address of the input token.
  
  Example: `"0x4200000000000000000000000000000000000006"` for ETH
</ParamField>

<ParamField query="tokenOutAddress" type="string" required>
  The address of the output token.
  
  Example: `"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"` for USDC
</ParamField>

<ParamField query="reverse" type="boolean" optional>
  Not supported yet - reserved for future use.
  Default: `false`
</ParamField>

<ParamField query="direct" type="boolean" optional>
  If true, only direct routes (single hop) will be considered.
  Default: `false`
</ParamField>

<ParamField query="excludeProtocols" type="array[number]" optional>
  Comma-separated list of protocol IDs to exclude from routing (e.g., "1,2,3").
  Default: `[]`
</ParamField>

<ParamField query="integratorAddress" type="string" optional>
  Integrator address for fee distribution.
</ParamField>

<ParamField query="integratorFeePercentageBps" type="number" optional>
  Integrator fee percentage in basis points (0-500) maximum 5%.
  Example: `100` for 1%
</ParamField>

<ParamField query="integratorSurplusPercentageBps" type="number" optional>
  Integrator surplus percentage in basis points (0-5000) maximum 50%.
  Example: `1000` for 10%
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the route calculation was successful.
</ResponseField>

<ResponseField name="inputToken" type="object">
  Details about the input token.
  <Expandable>
    <ResponseField name="name" type="string">
      The token's name (e.g., "Wrapped Ether")
    </ResponseField>
    <ResponseField name="address" type="string">
      The token's contract address
    </ResponseField>
    <ResponseField name="decimals" type="number">
      Number of decimals the token uses
    </ResponseField>
    <ResponseField name="price" type="number">
      Current price of the token in USD
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="inputAmount" type="string">
  Input amount in wei format.
</ResponseField>

<ResponseField name="outputToken" type="object">
  Details about the output token.
  <Expandable>
    <ResponseField name="name" type="string">
      The token's name (e.g., "USD Coin")
    </ResponseField>
    <ResponseField name="address" type="string">
      The token's contract address
    </ResponseField>
    <ResponseField name="decimals" type="number">
      Number of decimals the token uses
    </ResponseField>
    <ResponseField name="price" type="number">
      Current price of the token in USD
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="outputAmount" type="string">
  The estimated amount of output tokens in wei format.
</ResponseField>

<ResponseField name="estimatedGasUsed" type="string">
  Estimated gas cost for the swap in wei.
</ResponseField>

<ResponseField name="estimatedGasUsedInUsd" type="number" optional>
  Estimated gas cost in USD.
</ResponseField>

<ResponseField name="time" type="number">
  Timestamp of route calculation.
</ResponseField>

<ResponseField name="bestQuotesByProtocols" type="array[string]">
  Best quotes by protocols.
</ResponseField>

<ResponseField name="initial" type="boolean" optional>
  Whether this is an initial route.
</ResponseField>

<ResponseField name="routeSwapType" type="number" optional>
  Route swap type.
</ResponseField>

<ResponseField name="integratorAddress" type="string" optional>
  Integrator address.
</ResponseField>

<ResponseField name="integratorFeePercentage" type="number" optional>
  Integrator fee percentage in basis points (0-500) maximum 5%.
</ResponseField>

<ResponseField name="integratorSurplusPercentage" type="number" optional>
  Integrator surplus percentage in basis points (0-5000) maximum 50%.
</ResponseField>

<ResponseField name="meta" type="object">
  API metadata including version and response timestamp.
  <Expandable>
    <ResponseField name="apiVersion" type="string">
      API version (e.g., "2.0")
    </ResponseField>
    <ResponseField name="timestamp" type="string">
      Response timestamp in ISO 8601 format
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="route" type="array">
  Array of route segments with detailed swap information.
  <Expandable>
    <ResponseField name="percent" type="string">
      Percentage of input amount going through this route
    </ResponseField>
    <ResponseField name="swaps" type="array">
      Array of swap steps in this route segment
      <Expandable>
        <ResponseField name="protocol" type="number">
          Protocol identifier (e.g., 5 for Uniswap V3)
        </ResponseField>
        <ResponseField name="poolName" type="string">
          Name of the liquidity pool
        </ResponseField>
        <ResponseField name="poolAddress" type="string">
          Address of the liquidity pool
        </ResponseField>
        <ResponseField name="percent" type="string">
          Percentage of the segment amount through this pool
        </ResponseField>
        <ResponseField name="extraData" type="object">
          Protocol-specific parameters
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>
```bash cURL
curl -L \
  "https://api.fibrous.finance/base/route?amount=1000000000000000000&tokenInAddress=0x4200000000000000000000000000000000000006&tokenOutAddress=0x833589fcd6edb6e08f4c7c32d4f71b54bda02913" \
  --header "Accept: */*"
```

```python Python
import requests

url = "https://api.fibrous.finance/base/route"

params = {
    "amount": "1000000000000000000",  # 1 ETH
    "tokenInAddress": "0x4200000000000000000000000000000000000006",
    "tokenOutAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913"
}

response = requests.get(url, params=params)
print(response.json())
```

```javascript JavaScript
const axios = require('axios');

const params = {
  amount: '1000000000000000000', // 1 ETH
  tokenInAddress: '0x4200000000000000000000000000000000000006',
  tokenOutAddress: '0x833589fcd6edb6e08f4c7c32d4f71b54bda02913'
};

axios.get('https://api.fibrous.finance/base/route', { params })
  .then(response => console.log(response.data))
  .catch(error => console.error(error));
```
</RequestExample>

<ResponseExample>
```json Response
{
  "success": true,
  "inputToken": {
    "name": "Wrapped Ether",
    "address": "0x4200000000000000000000000000000000000006",
    "decimals": 18,
    "price": 4337.55
  },
  "inputAmount": "1000000000000000000",
  "outputToken": {
    "name": "USD Coin",
    "address": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
    "decimals": 6,
    "price": 0.999796
  },
  "outputAmount": "4303439184",
  "estimatedGasUsed": "347407383168",
  "estimatedGasUsedInUsd": 0.0031034457390210508,
  "route": [
    {
      "percent": "100%",
      "swaps": [
        [
          {
            "protocol": 9,
            "poolName": "PancakeSwap V3",
            "poolAddress": "0x72ab388e2e2f6facef59e3c3fa2c4e29011c2d38",
            "fromTokenAddress": "0x4200000000000000000000000000000000000006",
            "toTokenAddress": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
            "percent": "100%",
            "extraData": {
              "fee": 100
            }
          }
        ]
      ]
    }
  ],
  "time": 0.858,
  "bestQuotesByProtocols": [],
  "initial": true,
  "routeSwapType": 2,
  "meta": {
    "apiVersion": "2.0",
    "timestamp": "2024-01-15T10:30:00.000Z"
  }
}
```
</ResponseExample>
